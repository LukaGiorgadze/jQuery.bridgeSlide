(function(e){e.fn.bridgeSlide=function(n){var n=e.extend({width:960,visibleItems:4,items:".items",item:".item",itemMargin:"auto",pagination:"#pagination",paginationExtended:false,paginationPrev:".left",paginationNext:".right",sliderStartAnimate:true,sliderStartSpeed:800,sliderStartEasing:"linear",sliderSpeed:500,sliderEasing:"linear",keyboardArrows:true,touch:true},n);return new t(this,n)};var t=function(e,t){var n=this;n._init(e,t)};t.prototype={config:null,element:null,containerDiv:null,items:null,itemsLength:0,itemWidth:0,pagination:null,paginationClickable:true,leftHide:0,rightHide:0,firstPos:0,lastPos:null,_init:function(t,n){this.element=t;this.config=n;this.element.css({overflowX:"hidden",overflowY:"visible",position:"relative"});this.containerDiv=e(document.createElement("div"));this.config.width=n.width=="100%"||n.width=="auto"?e(document).width():parseInt(n.width);var r=e(n.items,t);this.items=e(n.item,r);this.itemsLength=parseInt(this.items.length);this.element.append(this.containerDiv);r.appendTo(this.containerDiv);this.pagination=e(this.config.pagination,t).length&&this.config.paginationExtended===false?e(this.config.pagination,t).appendTo(t):e(this.config.pagination);this.containerDiv.css({width:n.width,position:"relative",margin:"0 auto",minHeight:this.items.filter(":visible").first().innerHeight()});if(this.itemsLength<=this.config.visibleItems){e(this.config.paginationPrev+","+this.config.paginationNext,this.pagination).addClass("disabled");return false}this.itemWidth=this.items.innerWidth();this.leftHide=this.items.first().offset().left;this.rightHide=e(window).width()-this.leftHide;this.leftHide+=this.itemWidth;this.fixer();if(n.itemMargin==="auto"){n.itemMargin=parseInt(this.items.first().css("marginLeft"))+parseInt(this.items.first().css("marginRight"))}n.itemMargin=parseInt(n.itemMargin);this.pagination.hide();this.items.hide();this.startSlider();return false},startSlider:function(){var t=this;var n=t.config;var r=t.pagination;var i=0;var s=0;var o=t.items;var u=t.itemWidth;o.eq(n.visibleItems).prevAll().show();this.items.css({position:"absolute",top:0});if(n.sliderStartAnimate===true){this.items.css({left:this.rightHide});e(o).filter(":visible").each(function(t){e(this).stop().animate({left:i+s},{duration:n.sliderStartSpeed,specialEasing:{left:n.sliderStartEasing},done:function(){e(n.paginationPrev,r).addClass("disabled");r.fadeIn("fast")}});i+=u;s+=n.itemMargin})}else{this.items.slice(n.visibleItems,this.itemsLength).css({left:this.rightHide});e(o).filter(":visible").each(function(t){e(this).css({left:i+s});e(n.paginationPrev,r).addClass("disabled");r.fadeIn("fast");i+=u;s+=n.itemMargin})}if(n.keyboardArrows===true){e(document).keydown(function(e){switch(parseInt(e.keyCode)){case 39:t.goTo("next",n.paginationNext,e);break;case 37:t.goTo("prev",n.paginationPrev,e);break}})}e(n.paginationNext,r).click(function(e){t.goTo("next",this,e)});e(n.paginationPrev,r).click(function(e){t.goTo("prev",this,e)});if(n.touch===true){t.swipe(this.element[0],function(e,r){switch(e){case"left":t.goTo("next",n.paginationNext,r);break;case"right":t.goTo("prev",n.paginationPrev,r);break}})}return false},goTo:function(t,n,r){var i=this;var s=i.items;i.lastPos=this.items.filter(":visible:last").position().left;if(i.getPaginationClickable()===false||e(n,i.config.pagination).hasClass("disabled")){return false}if(t=="prev"){e(i.config.paginationNext,i.pagination).removeClass("disabled");var o=s.filter(":visible:first");var u=o.prevAll(i.config.item).length;if(u<=1){e(n,i.config.pagination).addClass("disabled")}else{e(n,i.config.pagination).removeClass("disabled")}}else if(t=="next"){e(i.config.paginationPrev,i.pagination).removeClass("disabled");var a=s.filter(":visible:last");var f=a.nextAll(i.config.item).length;if(f<=1){e(n,i.config.pagination).addClass("disabled")}else{e(n,i.config.pagination).removeClass("disabled")}}i.setPaginationClickable(false);e(s).filter(":visible").each(function(n,r){if(t=="prev"){switch(n){case i.config.visibleItems-1:i.firstPos=i.rightHide;break;case i.config.visibleItems-2:i.firstPos=i.lastPos;break;default:i.firstPos=e(r).position().left+i.itemWidth+i.config.itemMargin;break}}else if(t=="next"){switch(n){case 0:i.firstPos=-i.leftHide-i.config.itemMargin;break;case 1:i.firstPos=0;break;default:i.firstPos=e(r).position().left-i.itemWidth-i.config.itemMargin;break}}e(r).stop().animate({left:i.firstPos},{duration:n===0?i.config.sliderSpeed:i.config.sliderSpeed,specialEasing:{left:i.config.sliderEasing},done:function(){if(t=="prev"){n===i.config.visibleItems-1&&e(r).hide("0",function(){i.setPaginationClickable(true)})}else if(t=="next"){n===0&&e(r).hide("0",function(){i.setPaginationClickable(true)})}}})});t=="prev"?o.prev().show():a.next().show();e(t=="prev"?o.prev():a.next()).stop().animate({left:t=="prev"?0:a.position().left},{duration:i.config.sliderSpeed,specialEasing:{left:i.config.sliderEasing},complete:function(){}});return false},setPaginationClickable:function(e){this.paginationClickable=e;return false},getPaginationClickable:function(){return this.paginationClickable},fixer:function(){var t=this;e(window).on("resize",function(){t.leftHide=t.items.filter(":visible").first().offset().left;t.rightHide=e(window).width()-t.leftHide;t.leftHide+=t.itemWidth;t.items.filter(":visible").first().prevAll(t.config.item).css({left:-t.leftHide});t.items.filter(":visible").last().nextAll(t.config.item).css({left:t.rightHide});t.config.width=t.config.width=="100%"||t.config.width=="auto"?e(document).width():t.config.width;e(t.containerDiv).css({width:t.config.width})});return false},swipe:function(e,t){var n=e,r,i,s,o,u,a=150,f=100,l=300,c,h,p=t||function(e,t){};n.addEventListener("touchstart",function(e){var t=e.changedTouches[0];r="none";i=t.pageX;s=t.pageY;h=(new Date).getTime()},false);n.addEventListener("touchmove",function(e){},false);n.addEventListener("touchend",function(e){var t=e.changedTouches[0];o=t.pageX-i;u=t.pageY-s;c=(new Date).getTime()-h;if(c<=l){if(Math.abs(o)>=a&&Math.abs(u)<=f){r=o<0?"left":"right"}else if(Math.abs(u)>=a&&Math.abs(o)<=f){r=u<0?"up":"down"}}p(r,e)},false);return false}}})(jQuery)
